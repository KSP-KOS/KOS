<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Anonymous Functions (A kind of Delegate) &mdash; kOS 1.3.3.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/kos_theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="Delegates (function references)" href="delegates.html" />
    <link rel="prev" title="KerboScript User Functions" href="user_functions.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../contents.html" class="icon icon-home"> kOS
          </a>
              <div class="version">
                1.3.3.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contents.html">Table of Contents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../downloads_links.html">Downloads and Links</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../library.html">Community Example Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general.html">General</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../language.html">Language</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="features.html">General Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="syntax.html">Language Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="flow.html">Flow Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="variables.html">Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_functions.html">User Functions</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Anonymous User Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="delegates.html">Delegates (function references)</a></li>
<li class="toctree-l2"><a class="reference internal" href="delegates.html#advanced-topics">Advanced topics</a></li>
<li class="toctree-l2"><a class="reference internal" href="delegates.html#kinds-of-delegate-no-suffixes">Kinds of Delegate (no suffixes)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../math.html">Mathematics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../commands.html">Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../structures.html">Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../addons.html">Addons</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute.html">Contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_help.html">Getting Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changes.html">Changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../contents.html">kOS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../contents.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../language.html">The <strong>KerboScript</strong> Language</a> &raquo;</li>
      <li>Anonymous Functions (A kind of Delegate)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/language/anonymous.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="anonymous-functions-a-kind-of-delegate">
<span id="anonymous-functions"></span><h1>Anonymous Functions (A kind of Delegate)<a class="headerlink" href="#anonymous-functions-a-kind-of-delegate" title="Permalink to this heading">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.0.0: </span>The anonymous function feature described on
this page did not exist prior to kOS 1.0.0</p>
</div>
</div>
<nav class="contents local" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#overview" id="id1">Overview</a></p></li>
<li><p><a class="reference internal" href="#syntax" id="id2">Syntax</a></p></li>
<li><p><a class="reference internal" href="#passing-in-to-other-functions" id="id3">Passing in to other functions</a></p></li>
<li><p><a class="reference internal" href="#lexicon-of-functions" id="id4">Lexicon of functions</a></p></li>
</ul>
</nav>
<section id="overview">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Overview</a><a class="headerlink" href="#overview" title="Permalink to this heading">¶</a></h2>
<p>There is a certain kind of <a class="reference internal" href="delegates.html#delegates"><span class="std std-ref">Delegate</span></a> in which you
don’t need to actually name the function in question, and can just
assign it right into a variable <em>as</em> a delegate to begin with, or
pass it <em>as</em> a delegate to another function call.</p>
<p>This is referred to as an
<a class="reference external" href="https://en.wikipedia.org/wiki/Anonymous_function">Anonymous Function</a>.</p>
</section>
<section id="syntax">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Syntax</a><a class="headerlink" href="#syntax" title="Permalink to this heading">¶</a></h2>
<p>In kerboscript, you can use this ability and it looks like this:</p>
<p>Given any <a class="reference internal" href="user_functions.html#user-functions"><span class="std std-ref">user function</span></a> like so:</p>
<div class="highlight-kerboscript notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nv">my_function_name</span> <span class="p">{</span>
  <span class="c1">// ---.</span>
  <span class="c1">//    |</span>
  <span class="c1">//    |---  The body of the function goes here.</span>
  <span class="c1">//    |</span>
  <span class="c1">// ---&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You can make that function into a delegate that can be assigned into a
variable, or passed as an argument to another function by simply leaving
off the name and the ‘function’ keyword and just using the section in
the curly braces by itself, like in this example:</p>
<div class="highlight-kerboscript notranslate"><div class="highlight"><pre><span></span><span class="k">set</span> <span class="nv">some_variable</span> <span class="ow">to</span> <span class="p">{</span>
  <span class="c1">// ---.</span>
  <span class="c1">//    |</span>
  <span class="c1">//    |---  The body of the function goes here.</span>
  <span class="c1">//    |</span>
  <span class="c1">// ---&#39;</span>
<span class="p">}.</span>   <span class="c1">// &lt;-- Note the period (&#39;.&#39;) statement terminator is mandatory</span>
     <span class="c1">//     here because this is actually an ordinary SET statement.</span>

<span class="c1">// some_variable is now a KOSDelegate of this function.</span>
<span class="c1">// It can be called just like delegates can, like so:</span>
<span class="nv">some_variable</span><span class="p">().</span>
<span class="c1">// or like so:</span>
<span class="nv">some_variable</span><span class="p">:</span><span class="nv">call</span><span class="p">().</span>
</pre></div>
</div>
</section>
<section id="passing-in-to-other-functions">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Passing in to other functions</a><a class="headerlink" href="#passing-in-to-other-functions" title="Permalink to this heading">¶</a></h2>
<p>Where this is often useful is in passing a small function into another
function.  Here’s an example.  Let’s say you have a function that
returns a list of all the <a class="reference internal" href="../structures/celestial_bodies/body.html#body"><span class="std std-ref">bodies</span></a> in your game that fit
some criteria that are unspecified until it gets used, like so:</p>
<div class="highlight-kerboscript notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nv">select_bodies</span> <span class="p">{</span>

  <span class="c1">// The parameter is expected to be a</span>
  <span class="c1">// delegate you can call on a body, that</span>
  <span class="c1">// returns true if the body should be</span>
  <span class="c1">// included, or false if it shouldn&#39;t:</span>
  <span class="kd">parameter</span> <span class="nv">should_include</span><span class="p">.</span>

  <span class="k">local</span> <span class="nv">all_bodies</span> <span class="ow">is</span> <span class="k">LIST</span><span class="p">().</span>
  <span class="k">local</span> <span class="nv">some_bodies</span> <span class="ow">is</span> <span class="k">LIST</span><span class="p">().</span>

  <span class="k">list</span> <span class="nv">BODIES</span> <span class="nv">in</span> <span class="nv">all_bodies</span><span class="p">.</span>
  <span class="k">for</span> <span class="nv">bod</span> <span class="nv">in</span> <span class="nv">all_bodies</span> <span class="p">{</span>
    <span class="k">if</span> <span class="nv">should_include</span><span class="p">(</span><span class="nv">bod</span><span class="p">)</span> <span class="p">{</span>
      <span class="nv">some_bodies</span><span class="p">:</span><span class="k">ADD</span><span class="p">(</span><span class="nv">bod</span><span class="p">).</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nv">some_bodies</span><span class="p">.</span>
<span class="p">}</span>

<span class="c1">// Example of how it could have been used with a traditional named function:</span>
<span class="c1">// -------------------------------------------------------------------------</span>
<span class="c1">//</span>
<span class="c1">// function is_smaller_than_mun {</span>
<span class="c1">//   parameter b. return (b:RADIUS &lt; Mun:RADIUS).</span>
<span class="c1">// }</span>
<span class="c1">//</span>
<span class="c1">// local small_bodies is select_bodies( is_smaller_than_mun@ ).</span>

<span class="c1">// But we&#39;re going to do the same thing using an anonymous function instead:</span>
<span class="c1">// -------------------------------------------------------------------------</span>

<span class="k">local</span> <span class="nv">small_bodies</span> <span class="ow">is</span> <span class="nv">select_bodies</span><span class="p">(</span> <span class="p">{</span> <span class="kd">parameter</span> <span class="nv">b</span><span class="p">.</span> <span class="k">return</span> <span class="p">(</span><span class="nv">b</span><span class="p">:</span><span class="nv">RADIUS</span> <span class="o">&lt;</span> <span class="nv">Mun</span><span class="p">:</span><span class="nv">RADIUS</span><span class="p">).}</span> <span class="p">).</span>



<span class="k">print</span> <span class="s">&quot;List of all bodies smaller than Mun is:&quot;</span><span class="p">.</span>
<span class="k">print</span> <span class="nv">small_bodies</span><span class="p">.</span>
</pre></div>
</div>
<p>Anywhere a <a class="reference internal" href="delegates.html#delegates"><span class="std std-ref">Delegate</span></a> was expected to be used, you can use
an anonymous function in its place instead.</p>
</section>
<section id="lexicon-of-functions">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Lexicon of functions</a><a class="headerlink" href="#lexicon-of-functions" title="Permalink to this heading">¶</a></h2>
<p>One example of a useful way to use anonymous functions is to create for
yourself a collection of delegates:</p>
<div class="highlight-kerboscript notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nv">make_vessel_utilities</span> <span class="p">{</span>
  <span class="kd">parameter</span> <span class="nv">ves</span><span class="p">.</span>

  <span class="c1">// Create a lexicon of anonymous functions to use on vessel ves:</span>
  <span class="c1">//</span>
  <span class="k">return</span> <span class="nv">LEXICON</span><span class="p">(</span>
      <span class="s">&quot;isSmall&quot;</span><span class="p">,</span> <span class="p">{</span><span class="k">return</span> <span class="nv">ves</span><span class="p">:</span><span class="nv">mass</span> <span class="o">&lt;</span> <span class="mf">50</span><span class="p">.},</span>
      <span class="s">&quot;isBig&quot;</span><span class="p">,</span> <span class="p">{</span><span class="k">return</span> <span class="nv">ves</span><span class="p">:</span><span class="nv">mass</span> <span class="o">&gt;</span> <span class="mf">150</span><span class="p">.},</span>
      <span class="s">&quot;circularEnough&quot;</span><span class="p">,</span> <span class="p">{</span><span class="k">return</span> <span class="nv">ves</span><span class="p">:</span><span class="nv">obt</span><span class="p">:</span><span class="nv">eccentricity</span> <span class="o">&lt;</span> <span class="mf">0</span><span class="p">.</span><span class="mf">1</span><span class="p">.}</span>
    <span class="p">).</span>
<span class="p">}</span>

<span class="k">local</span> <span class="nv">that_ship_utils</span> <span class="ow">is</span> <span class="nv">make_vessel_utilities</span><span class="p">(</span><span class="nv">Vessel</span><span class="p">(</span><span class="s">&quot;that ship&quot;</span><span class="p">)).</span>

<span class="k">if</span> <span class="nv">that_ship_utils</span><span class="p">[</span><span class="s">&quot;isSmall&quot;</span><span class="p">]()</span> <span class="p">{</span>
  <span class="k">print</span> <span class="s">&quot;that ship is small&quot;</span><span class="p">.</span>
<span class="p">}</span>

<span class="k">if</span> <span class="nv">that_ship_utils</span><span class="p">[</span><span class="s">&quot;circularEnough&quot;</span><span class="p">]()</span> <span class="p">{</span>
  <span class="k">print</span> <span class="s">&quot;that ship is circularized&quot;</span><span class="p">.</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Although kerboscript isn’t <em>entirely</em> “object oriented”, some kinds of
object-oriented ways of thinking can be simulated with techniques
like this.  Once you have the ability to treat a function as being
a piece of data, a lot of possibilities open up.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="user_functions.html" class="btn btn-neutral float-left" title="KerboScript User Functions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="delegates.html" class="btn btn-neutral float-right" title="Delegates (function references)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../copyright.html">Copyright</a> 2013-2021, Developed and maintained by kOS Team, Originally By Nivekk.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>