

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Variables &amp; Statements &mdash; kOS 0.15.3 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
        <link rel="author" title="About these documents"
              href="../about.html"/>
    <link rel="top" title="kOS 0.15.3 documentation" href="../index.html"/>
        <link rel="up" title="The KerboScript Language" href="../language.html"/>
        <link rel="next" title="KerboScript User Functions" href="user_functions.html"/>
        <link rel="prev" title="Flow Control" href="flow.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="../index.html" class="fa fa-home"> kOS</a>
        
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../downloads_links.html">Downloads and Links</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials.html">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/quickstart.html">Quick Start</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/designpatterns.html">Design Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/pidloops.html">PID Loops</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../general.html">General</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../bindings.html">Bound Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/cpu_vessel.html">CPU Vessel (SHIP)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/cpu_hardware.html">CPU Hardware</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/applauncher_panel.html">Launcher Panel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/telnet.html">Telnet Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/volumes.html">Files &amp; Volumes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/compiling.html">Machine Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/nametag.html">Name Tags</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/parts_and_partmodules.html">Parts &amp; PartModules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/comm_range.html">Communication Range</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general/career_limits.html">Respecting Career Limits</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../language.html">Language</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="features.html">General Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="syntax.html">Language Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="flow.html">Flow Control</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_functions.html">User Functions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../math.html">Mathematics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../math/basic.html">Fundamental Constants</a></li>
<li class="toctree-l2"><a class="reference internal" href="../math/basic.html#mathematical-functions">Mathematical Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../math/vector.html">Vectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../math/direction.html">Directions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../math/geocoordinates.html">Geographic Coordinates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../math/ref_frame.html">Reference Frames</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../commands.html">Commands</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../commands/flight.html">Flight Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/prediction.html">Prediction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/list.html">Listing Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/parts.html">Parts Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/files.html">File I/O</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/terminalgui.html">Terminal and GUI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../structures.html">Structures</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../structures/orbits.html">Orbits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../structures/celestial_bodies.html">Celestial Bodies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../structures/vessels.html">Vessels &amp; Parts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../structures/waypoint.html">Waypoints</a></li>
<li class="toctree-l2"><a class="reference internal" href="../structures/misc.html">Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../addons.html">Addons</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../addons/AGX.html">Action Groups Extended</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addons/RemoteTech.html">RemoteTech</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contribute.html">Contribute</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">kOS</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../language.html">The <strong>KerboScript</strong> Language</a> &raquo;</li>
      
    <li>Variables &amp; Statements</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../_sources/language/variables.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="variables-statements">
<h1>Variables &amp; Statements<a class="headerlink" href="#variables-statements" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#declare-to" id="id7"><tt class="docutils literal"><span class="pre">DECLARE</span> <span class="pre">..</span> <span class="pre">TO</span></tt></a><ul>
<li><a class="reference internal" href="#initializer-required-in-declare" id="id8">Initializer required in DECLARE</a></li>
</ul>
</li>
<li><a class="reference internal" href="#declare-parameter" id="id9"><tt class="docutils literal"><span class="pre">DECLARE</span> <span class="pre">PARAMETER</span></tt></a></li>
<li><a class="reference internal" href="#set" id="id10"><tt class="docutils literal"><span class="pre">SET</span></tt></a><ul>
<li><a class="reference internal" href="#difference-between-set-and-declare" id="id11">Difference between SET and DECLARE</a></li>
</ul>
</li>
<li><a class="reference internal" href="#lock" id="id12"><tt class="docutils literal"><span class="pre">LOCK</span></tt></a></li>
<li><a class="reference internal" href="#toggle" id="id13"><tt class="docutils literal"><span class="pre">TOGGLE</span></tt></a></li>
<li><a class="reference internal" href="#on" id="id14"><tt class="docutils literal"><span class="pre">ON</span></tt></a></li>
<li><a class="reference internal" href="#off" id="id15"><tt class="docutils literal"><span class="pre">OFF</span></tt></a></li>
<li><a class="reference internal" href="#scoping-rules" id="id16">Scoping rules</a><ul>
<li><a class="reference internal" href="#nolazyglobal" id="id17"><tt class="docutils literal"><span class="pre">NOLAZYGLOBAL</span></tt></a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="declare-to">
<span id="declare"></span><h2><a class="toc-backref" href="#id7"><tt class="docutils literal"><span class="pre">DECLARE</span> <span class="pre">..</span> <span class="pre">TO</span></tt></a><a class="headerlink" href="#declare-to" title="Permalink to this headline">¶</a></h2>
<p>Syntax: <tt class="docutils literal"><span class="pre">DECLARE</span></tt> <em>identifier</em> <tt class="docutils literal"><span class="pre">TO</span></tt> <em>expression</em> <em>dot</em></p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<div class="last versionadded">
<p><span class="versionmodified">New in version 0.17: </span><strong>*BREAKING CHANGE</strong>
The meaning, and syntax, of this statement changed considerably
in this update.  Prior to this version, DECLARE always created
global variables no matter where it appeared in the script.
See &#8216;initialier required&#8217; below.</p>
</div>
</div>
<p>Declares a variable that is limited in scope to the code block it appears
in, and gives it an initial value:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">DECLARE</span> <span class="n">X</span> <span class="n">TO</span> <span class="mf">1.</span>
</pre></div>
</div>
<p>(A &#8220;code block&#8221; is any section of statements that begins with a
left-curly-brace &#8220;{&#8221; and ends with its closing right-curly-brace &#8220;}&#8221;.)</p>
<p>Any variable declared with DECLARE will only exist inside the code block
section it was created in.  After that code block is finished, the variable
will no longer exist.</p>
<p>Alternatively, a variable can be implicitly declared by any <tt class="docutils literal"><span class="pre">SET</span></tt> or
<tt class="docutils literal"><span class="pre">LOCK</span></tt> statement, however doing so causes the variable to always have
global scope.  <strong>The only way to make a variable be local instead of
global is to declare it explicitly with DECLARE</strong>.</p>
<div class="section" id="initializer-required-in-declare">
<h3><a class="toc-backref" href="#id8">Initializer required in DECLARE</a><a class="headerlink" href="#initializer-required-in-declare" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 0.17.</span></p>
</div>
<p>The syntax without the initializer, looking like so:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">DECLARE</span> <span class="n">x</span><span class="p">.</span> <span class="c1">// no initializer like &quot;TO 1.&quot;</span>
</pre></div>
</div>
<p>is <strong>no longer legal syntax</strong>.</p>
<p>Kerboscript now requires the use of the initializer clause (the &#8220;TO&#8221;
keyword) after the identifer name so as to make it impossible for
there to exist any uninitialized variables in a script.</p>
</div>
</div>
<div class="section" id="declare-parameter">
<span id="id1"></span><h2><a class="toc-backref" href="#id9"><tt class="docutils literal"><span class="pre">DECLARE</span> <span class="pre">PARAMETER</span></tt></a><a class="headerlink" href="#declare-parameter" title="Permalink to this headline">¶</a></h2>
<p>If you put this statement in the main part of your script, it
declares variables to be used as a parameter that can be passed
in using the <tt class="docutils literal"><span class="pre">RUN</span></tt> command.</p>
<p>If you put this statement inside of a <a class="reference internal" href="user_functions.html#user-functions"><em>Function body</em></a>,
then it declares variables to be used as a parameter that can
be passed in to that function when calling the function.</p>
<p>Program 1:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="c1">// This is the contents of program1:</span>
<span class="n">DECLARE</span> <span class="n">PARAMETER</span> <span class="n">X</span><span class="p">.</span>
<span class="n">DECLARE</span> <span class="n">PARAMETER</span> <span class="n">Y</span><span class="p">.</span>
<span class="n">PRINT</span> <span class="s">&quot;X times Y is &quot;</span> <span class="o">+</span> <span class="n">X</span><span class="o">*</span><span class="n">Y</span><span class="p">.</span>
</pre></div>
</div>
<p>Program 2:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="c1">// This is the contents of program2, which calls program1:</span>
<span class="n">SET</span> <span class="n">A</span> <span class="n">TO</span> <span class="mf">7.</span>
<span class="n">RUN</span> <span class="n">PROGRAM1</span><span class="p">(</span> <span class="n">A</span><span class="p">,</span> <span class="n">A</span><span class="o">+</span><span class="mi">1</span> <span class="p">).</span>
</pre></div>
</div>
<p>The above example would give the output:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">X</span> <span class="n">times</span> <span class="n">Y</span> <span class="n">is</span> <span class="mf">56.</span>
</pre></div>
</div>
<p>It is also possible to put more than one parameter into a single <tt class="docutils literal"><span class="pre">DECLARE</span> <span class="pre">PARAMETER</span></tt> statement, separated by commas, as shown below:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">DECLARE</span> <span class="n">PARAMETER</span> <span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">CheckFlag</span><span class="p">.</span>
</pre></div>
</div>
<p>This is exactly equivalent to:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">DECLARE</span> <span class="n">PARAMETER</span> <span class="n">X</span><span class="p">.</span>
<span class="n">DECLARE</span> <span class="n">PARAMETER</span> <span class="n">Y</span><span class="p">.</span>
<span class="n">DECLARE</span> <span class="n">PARAMETER</span> <span class="n">CheckFlag</span><span class="p">.</span>
</pre></div>
</div>
<p>Note: Unlike normal variables, Parameter variables are local to the program. When program A calls program B and passes parameters to it, program B can alter their values without affecting the values of the variables in program A.</p>
<dl class="docutils">
<dt>Caveat</dt>
<dd>This is only true if the values are primitive singleton values like numbers or booleans. If the values are Structures like Vectors or Lists, then they do end up behaving as if they were passed by reference, in the usual way that should be familiar to people who have used languages like Java or C# before.</dd>
</dl>
<p>The <tt class="docutils literal"><span class="pre">DECLARE</span> <span class="pre">PARAMETER</span></tt> statements can appear anywhere in a program as long as they are in the file at a point earlier than the point at which the parameter is being used. The order the arguments need to be passed in by the caller is the order the <tt class="docutils literal"><span class="pre">DECLARE</span> <span class="pre">PARAMETER</span></tt> statements appear in the program being called.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>Pass By Value</strong></p>
<p>The following paragraph is important for people familiar with other programming languages. If you are new to programming and don&#8217;t understand what it is saying, that&#8217;s okay you can ignore it.</p>
<p class="last">At the moment the only kind of parameter supported is a pass-by-value parameter, and pass-by reference parameters don&#8217;t exist. Be aware, however, that due to the way kOS is implemented on top of a reference-using object-oriented language (CSharp), if you pass an argument which is a complex aggregate structure (i.e. a Vector, or a List - anything that kOS lets you use a colon suffix with), then the parameters will behave exactly like being passed by reference because all you&#8217;re passing is the handle to the object rather than the object itself. This should be familiar behavior to anyone who has written software in Java or C# before.</p>
</div>
</div>
<div class="section" id="set">
<span id="id2"></span><h2><a class="toc-backref" href="#id10"><tt class="docutils literal"><span class="pre">SET</span></tt></a><a class="headerlink" href="#set" title="Permalink to this headline">¶</a></h2>
<p>Sets the value of a variable. Implicitly creates a global variable if it doesn’t already exist:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">SET</span> <span class="n">X</span> <span class="n">TO</span> <span class="mf">1.</span>
<span class="n">SET</span> <span class="n">X</span> <span class="n">TO</span> <span class="n">y</span><span class="o">*</span><span class="mi">2</span> <span class="o">-</span> <span class="mf">1.</span>
</pre></div>
</div>
<p>This follows the <a class="reference internal" href="#scope"><em>scoping rules explained below</em></a>.  If the
variable can be found in the current local scope, or any scope higher
up, then it won&#8217;t be created and instead the existing one will be used.</p>
<div class="section" id="difference-between-set-and-declare">
<h3><a class="toc-backref" href="#id11">Difference between SET and DECLARE</a><a class="headerlink" href="#difference-between-set-and-declare" title="Permalink to this headline">¶</a></h3>
<p>The following two look very similar and you might ask why you&#8217;d pick
one instead of the other:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">DECLARE</span> <span class="n">X</span> <span class="n">TO</span> <span class="mf">1.</span>
<span class="n">SET</span> <span class="n">X</span> <span class="n">TO</span> <span class="mf">1.</span>
</pre></div>
</div>
<p>The difference is that <tt class="docutils literal"><span class="pre">SET</span></tt> attempts to store the value in the
variable that already exists, if it can find one, and it only
creates a new variable if it <em>has</em> to because there isn&#8217;t one that
already exists.  <em>(That&#8217;s the first difference)</em>.  Because <tt class="docutils literal"><span class="pre">SET</span></tt>
doesn&#8217;t make a new variable until it has exhausted the attempts to
find an existing one by looking up the &#8220;scope stack&#8221;, <tt class="docutils literal"><span class="pre">SET</span></tt> only
is capable of creating <strong>global</strong> variables.  <em>(That&#8217;s the second
difference.)</em></p>
</div>
</div>
<div class="section" id="lock">
<h2><a class="toc-backref" href="#id12"><tt class="docutils literal"><span class="pre">LOCK</span></tt></a><a class="headerlink" href="#lock" title="Permalink to this headline">¶</a></h2>
<p>Declares that the idenifier will refer to an expression that is always re-evaluated on the fly every time it is used (See also <a class="reference internal" href="flow.html#lock"><em>Flow Control documentation</em></a>):</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">SET</span> <span class="n">Y</span> <span class="n">TO</span> <span class="mf">1.</span>
<span class="n">LOCK</span> <span class="n">X</span> <span class="n">TO</span> <span class="n">Y</span> <span class="o">+</span> <span class="mf">1.</span>
<span class="n">PRINT</span> <span class="n">X</span><span class="p">.</span>    <span class="c1">// prints &quot;2&quot;</span>
<span class="n">SET</span> <span class="n">Y</span> <span class="n">TO</span> <span class="mf">2.</span>
<span class="n">PRINT</span> <span class="n">X</span><span class="p">.</span>    <span class="c1">// prints &quot;3&quot;</span>
</pre></div>
</div>
<p>Note that because of how LOCK expressions are in fact implemented as mini
functions, they cannot have local scope.  A LOCK <em>always</em> has global scope.</p>
</div>
<div class="section" id="toggle">
<span id="id3"></span><h2><a class="toc-backref" href="#id13"><tt class="docutils literal"><span class="pre">TOGGLE</span></tt></a><a class="headerlink" href="#toggle" title="Permalink to this headline">¶</a></h2>
<p>Toggles a variable between <tt class="docutils literal"><span class="pre">TRUE</span></tt> or <tt class="docutils literal"><span class="pre">FALSE</span></tt>. If the variable in question starts out as a number, it will be converted to a boolean and then toggled. This is useful for setting action groups, which are activated whenever their values are inverted:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">TOGGLE</span> <span class="n">AG1</span><span class="p">.</span> <span class="c1">// Fires action group 1.</span>
<span class="n">TOGGLE</span> <span class="n">SAS</span><span class="p">.</span> <span class="c1">// Toggles SAS on or off.</span>
</pre></div>
</div>
<p>This follows the same rules as <a class="reference internal" href="#set"><em>SET</em></a>, in that if the variable in
question doesn&#8217;t already exist, it will end up creating it as a global
variable.</p>
</div>
<div class="section" id="on">
<span id="id4"></span><h2><a class="toc-backref" href="#id14"><tt class="docutils literal"><span class="pre">ON</span></tt></a><a class="headerlink" href="#on" title="Permalink to this headline">¶</a></h2>
<p>Sets a variable to <tt class="docutils literal"><span class="pre">TRUE</span></tt>. This is useful for the <tt class="docutils literal"><span class="pre">RCS</span></tt> and <tt class="docutils literal"><span class="pre">SAS</span></tt> bindings:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">RCS</span> <span class="n">ON</span><span class="p">.</span>  <span class="c1">// Turns on the RCS</span>
</pre></div>
</div>
<p>This follows the same rules as <a class="reference internal" href="#set"><em>SET</em></a>, in that if the variable in
question doesn&#8217;t already exist, it will end up creating it as a global
variable.</p>
</div>
<div class="section" id="off">
<span id="id5"></span><h2><a class="toc-backref" href="#id15"><tt class="docutils literal"><span class="pre">OFF</span></tt></a><a class="headerlink" href="#off" title="Permalink to this headline">¶</a></h2>
<p>Sets a variable to <tt class="docutils literal"><span class="pre">FALSE</span></tt>. This is useful for the <tt class="docutils literal"><span class="pre">RCS</span></tt> and <tt class="docutils literal"><span class="pre">SAS</span></tt> bindings:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">RCS</span> <span class="n">OFF</span><span class="p">.</span>  <span class="c1">// Turns off the RCS</span>
</pre></div>
</div>
<p>This follows the same rules as <a class="reference internal" href="#set"><em>SET</em></a>, in that if the variable in
question doesn&#8217;t already exist, it will end up creating it as a global
variable.</p>
</div>
<div class="section" id="scoping-rules">
<span id="scope"></span><h2><a class="toc-backref" href="#id16">Scoping rules</a><a class="headerlink" href="#scoping-rules" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<div class="last versionadded">
<p><span class="versionmodified">New in version 0.17: </span>In prior versions of kerboscript, all identifiers other than
DECLARE PARAMETER identifiers were always global variables no
matter what, even if you used the DECLARE statement to make them.</p>
</div>
</div>
<dl class="docutils">
<dt>What is Scope?</dt>
<dd>The term <em>Scope</em> simply refers to asking the question &#8220;where in the
code can this variable be used, and how long does it last before it
goes away?&#8221;  The <em>scope</em> of a variable is the section of the program&#8217;s
code that it &#8220;works&#8221; within.  Any section of the program&#8217;s code
from which the variable cannot be seen is said to be &#8220;out of that
variable&#8217;s scope&#8221;.</dd>
<dt>Global scope</dt>
<dd>The simplest scope is called &#8220;global&#8221;.  Global scope simply means
&#8220;this variable can be used from anywhere in the program&#8221;.  If you
never use the DECLARE statement, then your variables in kerboscript
will all be in <em>global scope</em>.  For simple easy scripts used by
beginners, this is often enough and you don&#8217;t have to read the rest
of this topic until you start advancing to more intermediate scripts.</dd>
</dl>
<p>If you need to have variables that only have local scope, either just
to keep your code more manageable, or because you literally need
local scope to allow for recursive function calls, then you use the
DECLARE statement to create the variables.</p>
<dl class="docutils">
<dt>DECLARE statements are in block scope</dt>
<dd>Kerboscript uses block scoping to keep track of local variable
scope.  This means you can have variables that are not only
local to a function, but are in fact actually local to JUST
the current curly-brace block of statements, even if that block
of statements is, say, the body of an IF check, or the body of
an UNTIL loop.</dd>
<dt>Why limit scope?</dt>
<dd>You might be wondering why it&#8217;s useful to limit the scope of a
variable.  Wouldn&#8217;t it be easier just to make all variables
global?  The answer is twofold: (1) Once a program becomes large
enough, trying to remember the name of every variable in the
program, and having to keep coming up with new names for new
variables, can be a large unmanagable chore, especially with
programs written by more than one person collaborating together.
(2) Even if you can keep track of all that in your head, there&#8217;s
a certain programming technique known as recursion (TODO - wiki
link) in which you actually NEED to have local variable scope for
the technique to even work at all.</dd>
</dl>
<p>Examples:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">DECLARE</span> <span class="n">x</span> <span class="n">TO</span> <span class="mf">10.</span> <span class="c1">// X is now a global variable with value 10.</span>
<span class="n">SET</span> <span class="n">y</span> <span class="n">TO</span> <span class="mf">20.</span> <span class="c1">// Y is now a global variable (implicitly) with value 20.</span>
<span class="n">DECLARE</span> <span class="n">z</span> <span class="n">TO</span> <span class="mf">0.</span> <span class="c1">// Z is now a global variable.</span>

<span class="n">SET</span> <span class="n">sum</span> <span class="n">to</span> <span class="o">-</span><span class="mf">1.</span> <span class="c1">// sum is now an implicitly made global variable, containing -1.</span>

<span class="c1">// A function to return the mean average of all the items in the list</span>
<span class="c1">// passed into it, under the assumption all the items in the list are</span>
<span class="c1">// numbers of some sort:</span>
<span class="n">DECLARE</span> <span class="n">FUNCTION</span> <span class="n">calcAverage</span> <span class="p">{</span>
  <span class="n">DECLARE</span> <span class="n">PARAMETER</span> <span class="n">inputList</span><span class="p">.</span>

  <span class="n">DECLARE</span> <span class="n">sum</span> <span class="n">TO</span> <span class="mf">0.</span> <span class="c1">// sum is now local to this function&#39;s body.</span>
  <span class="n">FOR</span> <span class="n">val</span> <span class="n">IN</span> <span class="n">inputList</span> <span class="p">{</span>
    <span class="n">SET</span> <span class="n">sum</span> <span class="n">TO</span> <span class="n">sum</span> <span class="o">+</span> <span class="n">val</span><span class="p">.</span>
  <span class="p">}.</span>
  <span class="n">print</span> <span class="s">&quot;Inside calcAverage, sum is &quot;</span> <span class="o">+</span> <span class="n">sum</span><span class="p">.</span>
  <span class="n">RETURN</span> <span class="n">sum</span> <span class="o">/</span> <span class="n">inputList</span><span class="o">:</span><span class="n">LENGTH</span><span class="p">.</span>
<span class="p">}.</span>

<span class="n">SET</span> <span class="n">testList</span> <span class="n">TO</span> <span class="n">LIST</span><span class="p">();</span>
<span class="nl">testList:</span><span class="n">ADD</span><span class="p">(</span><span class="mi">5</span><span class="p">).</span>
<span class="nl">testList:</span><span class="n">ADD</span><span class="p">(</span><span class="mi">10</span><span class="p">).</span>
<span class="nl">testList:</span><span class="n">ADD</span><span class="p">(</span><span class="mi">15</span><span class="p">).</span>
<span class="n">print</span> <span class="s">&quot;average is &quot;</span> <span class="o">+</span> <span class="n">calcAverage</span><span class="p">(</span><span class="n">testList</span><span class="p">).</span>
<span class="n">print</span> <span class="s">&quot;but out here where it&#39;s global, sum is still &quot;</span> <span class="o">+</span> <span class="n">sum</span><span class="p">.</span>
</pre></div>
</div>
<p>This example will print:</p>
<div class="highlight-c"><div class="highlight"><pre>Inside calcAverage, sum is 30
average is 10
but out here where it&#39;s global, sum is still -1
</pre></div>
</div>
<p>Thus proving that the variable called SUM inside the function is NOT the
same variable as the one called SUM out in the global main code.</p>
<dl class="docutils">
<dt>Nesting:</dt>
<dd>The scoping rules are nested as well.  If you attempt to use a
variable that doesn&#8217;t exist in the local scope, the next scope &#8220;outside&#8221;
it wil be used, and if it doesn&#8217;t exist there, the next scope &#8220;outside&#8221;
that will be used and so on, all the way up to the global scope.  Only
if the variable isn&#8217;t found at the global scope either will it be
implicitly created.</dd>
</dl>
<div class="section" id="nolazyglobal">
<span id="id6"></span><h3><a class="toc-backref" href="#id17"><tt class="docutils literal"><span class="pre">NOLAZYGLOBAL</span></tt></a><a class="headerlink" href="#nolazyglobal" title="Permalink to this headline">¶</a></h3>
<p>Often the fact that you can get an implicit global variable declared
without intending to can lead to a lot of code maintenence headaches
down the road.  If you make a typo in a variable name, you end up
creating a new variable instead of generating an error.  Or you may just
forget to mark the variable as local when you intended to.</p>
<p>If you wish to instruct kerboscript to alter its behavior and
disable its normal implicit globals, and instead demand that all
variables MUST be mentioned in a DECLARE statement, you can do so
using the <tt class="docutils literal"><span class="pre">NOLAZYGLOBAL</span></tt> syntax.  Everything that occurs inside
a NOLAZYGLOBAL code block will use the rule that varibles MUST already
exist before being encountered.  SET will no longer automatically create
variables for you when inside this section.</p>
<p>Example:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">NOLAZYGLOBAL</span> <span class="p">{</span>
  <span class="n">SET</span> <span class="n">num</span> <span class="n">TO</span> <span class="mf">1.</span>
  <span class="n">IF</span> <span class="n">TRUE</span> <span class="p">{</span>
    <span class="n">DECLARE</span> <span class="n">Y</span> <span class="n">TO</span> <span class="mf">2.</span>
    <span class="n">SET</span> <span class="n">num</span> <span class="n">TO</span> <span class="n">num</span> <span class="o">+</span> <span class="n">Y</span><span class="p">.</span> <span class="c1">// This is fine.  num exists already as a global and</span>
                        <span class="c1">// you&#39;re adding the local Y to it.</span>
    <span class="n">SET</span> <span class="n">nim</span> <span class="n">TO</span> <span class="mf">20.</span> <span class="c1">// This typo generates an error.  There is</span>
                   <span class="c1">// no such variable &quot;nim&quot; and NOLAZYGLOBAL</span>
                   <span class="c1">// says not to implicitly make it.</span>
  <span class="p">}.</span>
<span class="p">}.</span>

<span class="n">SET</span> <span class="n">nim</span> <span class="n">TO</span> <span class="mf">20.</span>  <span class="c1">// HERE, on the other hand, this doesn&#39;t generate an</span>
                <span class="c1">// error.  When outside the NOLAZYGLOBAL section,</span>
                <span class="c1">// it just makes a new varible called nim</span>
</pre></div>
</div>
<dl class="docutils">
<dt>Why NOLAZYGLOBAL?</dt>
<dd>The rationale behind NOLAZYGLOBAL is to primarily be used in cases
where you&#8217;re writing a libary of function calls you intend to
use elsewhere, and want to be careful not to accidentally make
them dependant on globals outside the function itself.</dd>
</dl>
<hr class="docutils" />
<dl class="docutils">
<dt>History:</dt>
<dd><p class="first">Kerboscript began its life as a language in which you never have to
declare a variable if you don&#8217;t want to.  You can just create any
variable implicitly by just using it in a SET statement.</p>
<p>There are a variety of programming langauges that work like this,
such as Perl, Javascript, and Lua.  However, they all share one
thing in common - once you want to allow the possiblity of having
local variables, you have to figure out how this should work with
the implicit variable declaration feature.</p>
<p>And all those languages went with the same solution, which
kerboscript now follows as well.  Because implicit undeclared
variables are intended to be a nice easy way for new users to
ease into programming, they should always default to being
global so that people who wish to keep programming that way
don&#8217;t need to understand or deal with scope.</p>
<p class="last">The NOLAZYGLOBAL keyword is meant to mimic Perl&#8217;s <tt class="docutils literal"><span class="pre">use</span> <span class="pre">strict;</span></tt>
directive.</p>
</dd>
</dl>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="user_functions.html" class="btn btn-neutral float-right" title="KerboScript User Functions">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="flow.html" class="btn btn-neutral" title="Flow Control"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Dunbaratu, erendrake, Originally By Nivekk.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.15.3',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>